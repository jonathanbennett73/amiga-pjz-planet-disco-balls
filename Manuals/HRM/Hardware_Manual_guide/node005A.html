<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- AG2HTML: CONVERTER=AG2HTML/1.1 FORMAT=AMIGAGUIDE/34.11 FILE="Hardware/Hard_2" NODE="2-8-2" TITLE="2 / Advanced Topics / Copper Loops and Branches and Comparison Enable" INDEX="Hardware/Hard_Index/MAIN" -->
<head>
<title>2 / Advanced Topics / Copper Loops and Branches and Comparison Enable</title>
</head>
<body>
<img src="../images/toc_d.gif" alt="[Contents]">
<a href="../Hardware_Manual_guide/node0240.html"><img src="../images/index.gif" alt="[Index]" border=0></a>
<img src="../images/help_d.gif" alt="[Help]">
<img src="../images/retrace_d.gif" alt="[Retrace]">
<a href="../Hardware_Manual_guide/node0059.html"><img src="../images/prev.gif" alt="[Browse &#060;]" border=0></a>
<a href="../Hardware_Manual_guide/node005B.html"><img src="../images/next.gif" alt="[Browse &#062;]" border=0></a>
<hr>
<pre>
<!-- AG2HTML: BODY=START -->
You can change the value in the  <a href="../Hardware_Manual_guide/node0050.html">location registers</a>  at any time and use
this value to construct loops in the instruction list. Before the next
 <a href="../Hardware_Manual_guide/node0169.html">vertical blanking</a>  time, however, the  <a href="../Hardware_Manual_guide/node0050.html">COP1LC</a>  registers must be
repointed to the beginning of the appropriate Copper list. The value in
the  <a href="../Hardware_Manual_guide/node0050.html">COP1LC</a>  location registers will be restored to the Copper's program
<a name="line7">counter at the start of the  <a href="../Hardware_Manual_guide/node0169.html">vertical blanking</a>  period.</a>

Bits 14-1 of instruction word 2 in the  <a href="../Hardware_Manual_guide/node004B.html">WAIT</a>  and  <a href="../Hardware_Manual_guide/node0059.html">SKIP</a> . instructions
specify which bits of the horizontal and vertical position are to be used
for the beam counter comparison. The position in instruction word 1 and
the compare enable bits in instruction word 2 are tested against the
actual beam counters before any further action is taken. A position bit in
instruction word 1 is used in comparing the positions with the actual beam
counters if and only if the corresponding enable bit in instruction word 2
is set to 1. If the corresponding enable bit is 0, the comparison is
always true. For instance, if you care only about the value in the last
four bits of the vertical position, you set only the last four compare
enable bits, bits (11-8) in instruction word 2.

Not all of the bits in the beam counter may be masked.  If you look at the
description of the IR2 (second instruction word) you will notice that bit
15 is the  <a href="../Hardware_Manual_guide/node005D.html">blitter-finished-disable bit</a> . This bit is not part of the beam
counter comparison mask, it has its own meaning in the Copper  <a href="../Hardware_Manual_guide/node004B.html">WAIT</a> 
instruction. Thus, you can not mask the most significant bit in  <a href="../Hardware_Manual_guide/node004B.html">WAIT</a>  or
 <a href="../Hardware_Manual_guide/node0059.html">SKIP</a>  instructions. In most situations this limitation does not come into
play, however, the following example shows how to deal with it.
<!-- AG2HTML: BODY=END -->
</pre>
</body>
</html>
